package cwin5.utils{	import flash.display.Sprite;	import flash.display.Stage;	import flash.events.Event;	import flash.text.TextField;	import flash.utils.getTimer;		/**	 * 帧频计算.	 * new C5FPS().startCalc(stage);	 */	public class C5FPS 	{				/// 最后的时间.		private var lastTime:uint;				/// 经过了多少帧.		private var framesPassed:uint = 0;				/// 更新帧频的需要次数.		private var resetAfter:uint = 15;				/// 最后记录的FPS.		private var fps:Number;				/// 帧频输出框.		private static var display:TextField;				/// 保留计算结果后几位.		private var precision:uint = 2;				/// The stage.		private var stage:Stage;				/**		 * 开始计算FPS.		 */		public function startCalc(s:Stage):void		{			if (display == null)			{				lastTime = getTimer();				framesPassed = 0;				stage = s;												var sprite:Sprite = new Sprite();				sprite.graphics.beginFill(0 , 0.5);				sprite.graphics.drawRoundRect(0 , 0, 110 , 20, 5);				sprite.graphics.endFill();								sprite.x = stage.stageWidth - 110;								display = new TextField();				display.width = 104;				display.height = 19;				display.textColor = 0xffffff;				display.x = 55 / 2;								sprite.addChild(display);								stage.addEventListener(Event.ENTER_FRAME, update);				stage.addChild(sprite);				sprite.mouseEnabled = display.mouseEnabled = false;			}		}				/**		 * 停止计算帧频		 */ 		public function stopCalc():void		{			stage.removeEventListener(Event.ENTER_FRAME, update);		}				/**		 * 计算帧频		 */ 		public function update(e:Event):void		{			framesPassed++;			if (framesPassed == resetAfter) 			{				var t2:uint = getTimer();				fps = ((1000 * framesPassed) / (t2 - lastTime));				lastTime = t2;				framesPassed = 0;				if (display) 				{					display.text = fps.toFixed(precision) + ' fps';				}			}		}			}}